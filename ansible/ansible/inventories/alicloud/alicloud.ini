[credentials]
# 推荐用环境变量注入（见下方），此处留空或写入受管控的 RAM 子账号/STS
alicloud_access_key =
alicloud_secret_key =
alicloud_region      = cn-hangzhou
alicloud_profile     =
alicloud_shared_credentials_file =
alicloud_ecs_role_name =
alicloud_security_token =

[ecs]
# 地域：all 表示自动遍历（可用 regions_exclude 排除）
regions = all
regions_exclude =

# 仅抓取特定状态实例（默认 running），或开启 all_instances
all_instances = False
instance_states = running

# 目的地址与主机名来源：public_ip_address / private_ip_address / eip_address / hostname / tag_xxx
destination_variable = private_ip_address
hostname_variable    = tag_name

# 分组策略（强烈推荐按标签与 VPC/安全组）
group_by_instance_id = False
group_by_region = True
group_by_availability_zone = True
group_by_instance_type = True
group_by_image_id = False
group_by_vpc_id = True
group_by_vswitch_id = True
group_by_security_group = True
group_by_tag_keys = True
group_by_tag_none = True
nested_groups = True
expand_csv_tags = True

# 仅包含/排除符合正则的主机名（可为空）
pattern_include =
pattern_exclude =

# 过滤条件（支持 tags / pagination 等），常用：只纳入被管标签的机器
# 示例：仅纳入 env=prod 且 managed=ansible 的实例
instance_filters = tag:env=prod, tag:managed=ansible

# 缓存配置（避免频繁 API）
cache_path = ~/.ansible/tmp
cache_max_age = 300

#bash使用
export ALICLOUD_ACCESS_KEY="xxx"
export ALICLOUD_SECRET_KEY="yyy"
export ALICLOUD_REGION="cn-hangzhou"
# 可选：STS/AssumeRole
export ALICLOUD_ASSUME_ROLE_ARN="acs:ram::1234567890:role/ansible-executor"
export ALICLOUD_ASSUME_ROLE_SESSION_NAME="ansible-session"
export ALICLOUD_ASSUME_ROLE_SESSION_EXPIRATION="3600"
